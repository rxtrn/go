<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>rxtrn</title>

    <!-- FAVICON -->
    <link rel="icon" type="image/png" href="favicon.png">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        :root {
            --bg-color: #050505;
            --grid-color: #1a1a1a;
            --snake-color: #00ff41;
            --snake-glow: 0 0 10px #00ff41, 0 0 20px #00ff41;
            --food-color: #ff00ff;
            --food-glow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
            --text-color: #00ffff;
            --ui-bg: rgba(0, 20, 20, 0.9);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            background-image:
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 20px 20px;
            touch-action: none;
        }

        #construction-banner {
            background-color: var(--text-color);
            color: var(--bg-color);
            padding: 10px 20px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            text-align: center;
            border-radius: 5px;
            box-shadow: 0 0 15px var(--text-color);
            transition: opacity 0.5s ease-out;
            cursor: pointer;
        }

        .hidden-banner {
            opacity: 0;
            pointer-events: none;
            height: 0;
            margin-bottom: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        #game-container {
            position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
            border: 2px solid var(--text-color);
        }

        canvas { display: block; }

        #ui-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: flex;
            justify-content: space-between;
            flex-direction: column;
            padding: 10px;
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 1.2rem;
        }

        #start-screen, #game-over-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--ui-bg);
            padding: 2rem;
            border: 1px solid var(--text-color);
            text-align: center;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
            pointer-events: auto;
        }

        .hidden { display: none !important; }

        button {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--text-color);
            padding: 10px 20px;
            font-family: 'Orbitron', sans-serif;
            cursor: pointer;
            margin-top: 10px;
        }

        #mobile-controls {
            display: none;
            grid-template-columns: repeat(3, 60px);
            grid-template-rows: repeat(2, 60px);
            gap: 10px;
            margin-top: 20px;
        }

        .d-pad-btn {
            background: rgba(0,255,255,0.2);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 24px;
        }

        .up {grid-column:2}
        .left {grid-column:1}
        .down {grid-column:2}
        .right {grid-column:3}

        @media (max-width:768px) { #mobile-controls {display:grid;} }
    </style>
</head>
<body>

<div id="construction-banner">Website under construction. Enjoy the game!</div>

<div id="game-container">
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <div id="ui-layer">
        <div class="score-board">
            <span>SCORE: <span id="score">0</span></span>
            <span>HIGH: <span id="high-score">0</span></span>
        </div>
    </div>

    <div id="start-screen">
        <h1>NEON SNAKE</h1>
        <button onclick="startGame()">START</button>
    </div>

    <div id="game-over-screen" class="hidden">
        <h1>GAME OVER</h1>
        <p>Score: <span id="final-score">0</span></p>
        <button onclick="startGame()">RESTART</button>
    </div>
</div>

<div id="mobile-controls">
    <div class="d-pad-btn up" data-dir="up">▲</div>
    <div class="d-pad-btn left" data-dir="left">◀</div>
    <div class="d-pad-btn down" data-dir="down">▼</div>
    <div class="d-pad-btn right" data-dir="right">▶</div>
</div>

<script>
let canvas = document.getElementById("gameCanvas");
let ctx = canvas.getContext("2d");

let snake, food, dx, dy, nextDx, nextDy, score, highScore;
let gridSize=20, tileCount=20, speed=120, running=false;

let banner = document.getElementById("construction-banner");
setTimeout(()=>banner.classList.add("hidden-banner"),7000);
banner.onclick = ()=>banner.classList.add("hidden-banner");

highScore = localStorage.getItem("snakeHighScore")||0;
document.getElementById("high-score").innerText = highScore;

function startGame(){
    snake=[{x:10,y:10},{x:10,y:11},{x:10,y:12}];
    dx=0;dy=-1;nextDx=0;nextDy=-1;
    score=0; speed=120; running=true;
    document.getElementById("score").innerText=0;
    document.getElementById("start-screen").classList.add("hidden");
    document.getElementById("game-over-screen").classList.add("hidden");
    spawnFood();
    loop();
}

function loop(){
    if(!running) return;
    setTimeout(()=>{update();draw();loop();},speed);
}

function update(){
    dx=nextDx; dy=nextDy;
    let head={x:snake[0].x+dx,y:snake[0].y+dy};

    if(head.x<0||head.y<0||head.x>=tileCount||head.y>=tileCount) return gameOver();

    for(let s of snake) if(s.x===head.x&&s.y===head.y) return gameOver();

    snake.unshift(head);
    if(head.x===food.x&&head.y===food.y){
        score+=10;
        document.getElementById("score").innerText=score;
        spawnFood();
    }else snake.pop();
}

function draw(){
    ctx.fillStyle="#050505";
    ctx.fillRect(0,0,400,400);
    ctx.shadowBlur=15;ctx.shadowColor="#0f0";
    snake.forEach((s,i)=>{
        ctx.fillStyle=i==0?"#ccffcc":"#00ff41";
        ctx.fillRect(s.x*20,s.y*20,18,18);
    });
    ctx.shadowColor="#f0f";
    ctx.fillStyle="#ff00ff";
    ctx.fillRect(food.x*20,food.y*20,18,18);
    ctx.shadowBlur=0;
}

function spawnFood(){
    food={x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20)};
}

function gameOver(){
    running=false;
    document.getElementById("final-score").innerText=score;
    if(score>highScore){
        highScore=score;
        localStorage.setItem("snakeHighScore", highScore);
        document.getElementById("high-score").innerText=highScore;
    }
    document.getElementById("game-over-screen").classList.remove("hidden");
}

document.addEventListener("keydown",e=>{
    if(e.key==="ArrowUp"&&dy!==1){nextDx=0;nextDy=-1;}
    if(e.key==="ArrowDown"&&dy!==-1){nextDx=0;nextDy=1;}
    if(e.key==="ArrowLeft"&&dx!==1){nextDx=-1;nextDy=0;}
    if(e.key==="ArrowRight"&&dx!==-1){nextDx=1;nextDy=0;}
});

document.querySelectorAll(".d-pad-btn").forEach(btn=>{
    btn.onclick = ()=>handle(btn.dataset.dir);
});

function handle(dir){
    if(dir==="up"&&dy!==1){nextDx=0;nextDy=-1;}
    if(dir==="down"&&dy!==-1){nextDx=0;nextDy=1;}
    if(dir==="left"&&dx!==1){nextDx=-1;nextDy=0;}
    if(dir==="right"&&dx!==-1){nextDx=1;nextDy=0;}
}
</script>

</body>
</html>
